<!DOCTYPE html>
<html>
<head>
  <meta content='text/html; charset=UTF-8' http-equiv='Content-Type' />
  <script>
    window.onload = function() {
      setTimeout(function() {
        // Redirect based on user type
        var path = '<%= @user_type == "Trader" ? "traders" : "admin" %>/dashboard';
        window.location.href = '/' + path;
      }, 5000);
    };
  </script>
</head>
<body>
  <div style="max-width: 600px; margin: 0 auto; padding: 20px;">
    <h2>New <%= @user_type %> Login Alert</h2>
    <p>Hello <%= @user.email %>,</p>
    <p>A new login was detected for your <%= @user_type.downcase %> account.</p>
    
    <div style="background: #f5f5f5; padding: 15px; border-radius: 5px; margin: 20px 0;">
      <p><strong>Login Details:</strong></p>
      <ul>
        <li>Time: <%= @login_time.strftime("%B %d, %Y at %I:%M %p %Z") %></li>
        <li>IP Address: <%= @ip_address %></li>
        <li>Browser: <%= @user_agent %></li>
      </ul>
    </div>
    
    <p>If this was not you, please contact support immediately.</p>
    
    <div style="text-align: center; margin-top: 20px;">
      <p>Redirecting to dashboard in <span id="countdown">5</span> seconds...</p>
    </div>
  </div>

  <script>
    var timeLeft = 5;
    var countdownEl = document.getElementById('countdown');
    
    var countdownTimer = setInterval(function() {
      timeLeft--;
      countdownEl.textContent = timeLeft;
      
      if (timeLeft <= 0) {
        clearInterval(countdownTimer);
      }
    }, 1000);
  </script>
</body>
</html>